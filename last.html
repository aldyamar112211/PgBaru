<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Untuk Kamu</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: #f0f0f0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      margin: 0;
      padding: 10px;
      overflow-x: hidden;
      position: relative;
    }
    
    /* Ray Tracing Canvas Background */
    #rayCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.8;
      pointer-events: none;
    }
    
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .screen {
      width: 100%;
      max-width: 700px;
      padding: 2rem;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      opacity: 0;
      pointer-events: none;
      transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      z-index: 10;
      margin: 0;
    }
    
    .screen.active {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .screen h2 {
      background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientText 3s ease infinite;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      line-height: 1.2;
    }
    
    @keyframes gradientText {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .screen p {
      font-size: 1rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      margin-bottom: 1rem;
    }
    
    .typing-text {
      font-size: 1.3rem;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.95);
      white-space: pre-wrap;
      user-select: none;
      line-height: 1.5;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    .typing-text::after {
      content: '|';
      animation: blink 1s step-start infinite;
      margin-left: 2px;
      color: #4ecdc4;
      text-shadow: 0 0 10px #4ecdc4;
    }
    
    @keyframes blink {
      50% { opacity: 0; }
    }
    
    button {
      margin-top: 2rem;
      padding: 12px 30px;
      font-size: 1.1rem;
      font-weight: 600;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50px;
      background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(78, 205, 196, 0.2));
      color: white;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      min-width: 120px;
    }
    
    button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    button:hover::before {
      left: 100%;
    }
    
    button:active {
      transform: translateY(-1px);
    }

    /* Style khusus untuk halaman terakhir */
    .typing-text.special-love {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #ff6b6b, #ff8e8e, #ff6b9d, #c44569);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: loveGradient 2s ease-in-out infinite alternate, heartbeat 1.5s ease-in-out infinite;
      user-select: text;
      white-space: normal;
      text-shadow: none;
      filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.5));
      line-height: 1.2;
    }
    
    @keyframes loveGradient {
      0% { 
        background-position: 0% 50%;
        transform: scale(1);
      }
      100% { 
        background-position: 100% 50%;
        transform: scale(1.05);
      }
    }
    
    @keyframes heartbeat {
      0%, 100% { 
        filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.5));
      }
      50% { 
        filter: drop-shadow(0 0 30px rgba(255, 107, 107, 0.8));
      }
    }

    /* Mobile Styles (320px - 768px) */
    @media (max-width: 768px) {
      body {
        padding: 5px;
        min-height: 100vh;
        overflow-y: auto;
      }

      .screen {
        padding: 1.5rem;
        max-width: calc(100vw - 20px);
        border-radius: 15px;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-height: 90vh;
        overflow-y: auto;
      }

      .screen h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
      }

      .screen p {
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .typing-text {
        font-size: 1rem;
        line-height: 1.4;
      }

      .typing-text.special-love {
        font-size: 1.8rem;
        line-height: 1.1;
      }

      button {
        padding: 10px 25px;
        font-size: 1rem;
        margin-top: 1.5rem;
        width: auto;
        min-width: 100px;
      }

      /* Reduce ray effect on mobile for better performance */
      #rayCanvas {
        opacity: 0.4;
      }
    }

    /* Small Mobile Styles (320px - 480px) */
    @media (max-width: 480px) {
      body {
        padding: 3px;
      }

      .screen {
        padding: 1rem;
        max-width: calc(100vw - 10px);
        border-radius: 12px;
      }

      .screen h2 {
        font-size: 1.3rem;
      }

      .screen p {
        font-size: 0.85rem;
      }

      .typing-text {
        font-size: 0.9rem;
      }

      .typing-text.special-love {
        font-size: 1.5rem;
      }

      button {
        padding: 8px 20px;
        font-size: 0.9rem;
      }
    }

    /* Tablet Styles (768px - 1024px) */
    @media (min-width: 768px) and (max-width: 1024px) {
      .screen {
        max-width: 600px;
        padding: 2.5rem;
      }

      .screen h2 {
        font-size: 2.2rem;
      }

      .typing-text {
        font-size: 1.2rem;
      }

      .typing-text.special-love {
        font-size: 2.2rem;
      }

      button {
        padding: 14px 35px;
        font-size: 1.15rem;
      }
    }

    /* Large Desktop Styles (1024px+) */
    @media (min-width: 1024px) {
      .screen {
        max-width: 700px;
        padding: 3rem;
      }

      .screen h2 {
        font-size: 2.5rem;
      }

      .typing-text {
        font-size: 1.4rem;
      }

      .typing-text.special-love {
        font-size: 3rem;
      }

      button {
        padding: 15px 40px;
        font-size: 1.2rem;
      }
    }

    /* Landscape orientation adjustments for mobile */
    @media (max-width: 768px) and (orientation: landscape) {
      body {
        min-height: 100vh;
        padding: 5px;
      }

      .screen {
        max-height: 85vh;
        padding: 1rem;
        overflow-y: auto;
      }

      .screen h2 {
        font-size: 1.3rem;
        margin-bottom: 0.8rem;
      }

      .typing-text {
        font-size: 0.9rem;
        line-height: 1.3;
      }

      .typing-text.special-love {
        font-size: 1.4rem;
      }

      button {
        margin-top: 1rem;
        padding: 8px 20px;
        font-size: 0.9rem;
      }
    }

    /* High DPI screens */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .typing-text {
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    }

    /* Touch device optimizations */
    @media (hover: none) and (pointer: coarse) {
      button {
        padding: 12px 30px;
        min-height: 44px; /* Apple's recommended touch target size */
        touch-action: manipulation;
      }

      button:hover {
        transform: none; /* Disable hover effects on touch devices */
      }

      button:active {
        transform: scale(0.95);
        transition: transform 0.1s;
      }
    }

    /* Accessibility improvements */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }

      #rayCanvas {
        display: none;
      }

      .typing-text::after {
        animation: none;
      }
    }

    /* Dark mode support (if user prefers dark) */
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #0a0a1a 0%, #0d1128 50%, #061e3c 100%);
      }
    }

    /* Print styles */
    @media print {
      body {
        background: white !important;
        color: black !important;
      }

      #rayCanvas {
        display: none;
      }

      .screen {
        position: static !important;
        transform: none !important;
        background: white !important;
        box-shadow: none !important;
        border: 1px solid #ccc !important;
        backdrop-filter: none !important;
      }

      button {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Ray Tracing Canvas -->
  <canvas id="rayCanvas"></canvas>

  <!-- Halaman 1 -->
  <div id="screen0" class="screen active">
    <h2>Hai ... ðŸ’™</h2>
    <p>Makasih ya udah sampe di titik ini, aku bersyukur punya kamu, dan cuman kamu yang bisa aku percaya buat ngejaga hati aku, maaf kalo kesannya lebay, tapi ini fakta kalo aku emang sayang sama kamu</p>
    <button id="playBtn" class="btn btn-outline-light btn-lg">Mulai</button>
  </div>

  <!-- Halaman 2-8 (auto generated) -->
  <div id="screens-container"></div>

  <!-- Musik -->
  <audio id="music" src="music.mp3" preload="auto"></audio>

  <script>
    // Ray Tracing Effect (tetap sama seperti kode kamu, saya skip di sini)

    // -- script animasi dan interaksi utama --

    const playBtn = document.getElementById('playBtn');
    const screensContainer = document.getElementById('screens-container');
    const music = document.getElementById('music');

    let namaAsli = "";
    let namaPanggilan = "";

    // Screens array akan di-generate dinamis setelah input nama
    let screens = [];

    // Fungsi menampilkan halaman per halaman
    function showScreen(index) {
      const allScreens = document.querySelectorAll('.screen');
      allScreens.forEach(s => s.classList.remove('active'));
      if (index < 0) {
        document.getElementById('screen0').classList.add('active');
        return;
      }
      if (allScreens[index + 1]) {
        allScreens[index + 1].classList.add('active');
      }
    }

    // Fungsi animasi ketik per paragraf atau baris
    function typeText(element, text, delay = 30) {
      return new Promise(resolve => {
        element.textContent = '';
        let i = 0;
        function typing() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(typing, delay);
          } else {
            resolve();
          }
        }
        typing();
      });
    }

    // Jalankan sequence animasi tiap halaman dan tiap kalimat paragraf
    async function startSequence() {
      for (let i = 0; i < screens.length; i++) {
        showScreen(i);
        const screen = document.querySelectorAll('.screen')[i + 1];
        if (!screen) continue;

        const typingDiv = screen.querySelector('.typing-text');

        // Jika halaman terakhir (index terakhir)
        if (i === screens.length - 1) {
          typingDiv.className = 'typing-text ' + (screens[i].style || '');

          // Tampilkan teks final dengan nama panggilan langsung tanpa ketik
          // Bisa kamu modifikasi sesuai kebutuhan, misal menyisipkan nama
          typingDiv.textContent = `I Love You â¤ï¸, ${namaPanggilan}!`;

          break;  // selesai, keluar loop
        }

        if (Array.isArray(screens[i])) {
          typingDiv.textContent = '';
          for (const line of screens[i]) {
            await typeText(typingDiv, line, 30);
            await new Promise(r => setTimeout(r, 900));
            typingDiv.textContent = '';
          }
        } else if (typeof screens[i] === 'string') {
          await typeText(typingDiv, screens[i], 30);
        } else if (typeof screens[i] === 'object' && screens[i].text) {
          typingDiv.className = 'typing-text ' + (screens[i].style || '');
          await typeText(typingDiv, screens[i].text, 150);
        }

        await new Promise(r => setTimeout(r, 1200));
      }
      alert(`Selesai! Semangat terus ya, ${namaPanggilan}! ðŸ’™`);
    }

    // Ketika tombol mulai ditekan
    playBtn.addEventListener('click', () => {
      namaAsli = prompt("Masukkan nama asli Kamu?", "Tolong Di Isi Ya") || "Tolong Di Isi Ya";
      namaPanggilan = prompt("Masukkan nama panggilan kamu?", "Tolong Di Isi Ya") || "Tolong Di Isi Ya";

      // Update sapaan halaman awal
      document.querySelector('#screen0 h2').textContent = `Hai ${namaPanggilan}! ðŸ’™`;

      // Generate screens array dengan nama dinamis
      screens = [
        [
          `Halo, ${namaPanggilan}!`,
          `${namaAsli} Sayang yang luar biasa ðŸ’–`,
          "Semoga hari kamu penuh dengan energi positif dan hasil yang memuaskan.",
          "Tetap fokus dan jangan mudah menyerah ya sayang.",
          "Ingat untuk selalu istirahat cukup dan jaga kesehatan ya jangan keseringan begadang ðŸ’ª",
          "Aku percaya kamu bisa melewati semua dengan baik.",
          `Semangat terus, ${namaPanggilan}! Sayang Aku selalu mendukungmu! ðŸ’™`
        ],
        `Kamu tahu nggak? Dari pertama aku kenal kamu,  
aku sudah sadar kamu itu orang yang spesial.  
Kamu kuat, selalu sabar,  
dan punya Keyakinan yang ga semua orang punya.  
Aku bersyukur banget punya pacar kaya kamu.

Jangan pernah ragu sama kemampuan kamu, ya sayang.  
Aku tahu kadang kamu merasa khawatir atau takut salah,  
tapi itu bukan solusi untuk ga ngomong.  
Terus semangat, sayangkuuuuu! ðŸ’ª`,

        `Kalo kamu butuh apa apa di ingame, mau ngasih saran kasih tau aku ya.  
Soalnya aku bakalan seneng kalo orang yang aku sayang itu seneng.  
Jangan lupa juga buat istirahat dan isi energi sebelum mulai roblox kamu.  
Kamu jangan keseringan main roblox, nanti takut jadi gila! ðŸ˜Š

Aku yakin kamu itu sempurna dan tepat buat aku sayang!`,
        `Kalo kamu lagi dI jalan, Harus Hati-hati dan jangan terburu-buru.
Aku pengen kamu selalu aman dan sehat sampai tujuan.
Ingat, kamu penting banget buat aku dan banyak orang di sekitarmu.`,
        `Terima kasih, ${namaPanggilan} Sayang ðŸ’–

Aku sangat bersyukur bisa kenal kamu.
Semua kebahagiaan kamu aku juga ikut bahagia.
Kamu itu inspirasi aku setiap hari.`,
        `Satu lagi nih, sebelum mulai apapun itu:
Ingat, apapun hasilnya aku tetap bangga sama kamu.
Terus semangat dan jangan lupa istirahat, ya!`,

        { text: "Always here for you â¤ï¸", style: "special-love" }
      ];

      // Buat div screen untuk tiap halaman
      screensContainer.innerHTML = '';
      screens.forEach((content, idx) => {
        const screenDiv = document.createElement('div');
        screenDiv.classList.add('screen');
        let typingDiv = document.createElement('div');
        typingDiv.classList.add('typing-text');

        if (typeof content === 'object' && content.text) {
          typingDiv.classList.add(content.style || '');
        }
        screenDiv.appendChild(typingDiv);
        screensContainer.appendChild(screenDiv);
      });

      // Putar musik, mulai animasi
      music.currentTime = 0;
      music.play().catch(() => {
        console.log('Autoplay audio prevented by browser');
      });

      // Sembunyikan halaman awal dan mulai sequence
      showScreen(-1);
      startSequence();
    });
  </script>
</body>
</html>
